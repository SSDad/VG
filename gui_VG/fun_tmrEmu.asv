function fun_tmrEmu(src, evnt)

global yy pps
global tmrBH
global sLast

% tmrBH.Running
if strcmp(tmrBH.Running, 'off')
    t = src.TasksExecuted/pps;
    s = sin(t/4*pi*2-pi/2)/2+0.5+sLast;
else
    s = sLast;
end
yy = [yy s];

sLast = s;

updateWave;